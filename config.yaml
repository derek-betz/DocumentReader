# Default configuration for Document AI Agent

# OCR Configuration
ocr:
  engine: "tesseract"  # Options: tesseract, paddleocr
  
  tesseract:
    language: "eng"
    psm: 3  # Page segmentation mode (3 = automatic)
    oem: 3  # OCR Engine mode (3 = LSTM neural net)
    enhance_contrast: true
    denoise: true
    deskew: true
    tesseract_config: ""  # Additional Tesseract config string
  
  paddleocr:
    language: "en"
    use_angle_cls: true
    use_gpu: false

# Vision-Language Model Configuration
vision:
  enabled: false
  model: "gpt-4o"  # Options: gpt-4o, claude
  openai_api_key: ""  # Set via environment variable OPENAI_API_KEY
  anthropic_api_key: ""  # Set via environment variable ANTHROPIC_API_KEY

# Layout Detection Configuration
layout:
  enabled: true
  model_type: "basic_opencv"  # Options: detectron2, layoutparser, basic_opencv
  confidence_threshold: 0.5
  model_name: "lp://PubLayNet/mask_rcnn_X_101_32x8d_FPN_3x/config"

# Processing Configuration
processing:
  # PDF conversion settings
  pdf:
    dpi: 300
    format: "PNG"

  # Preprocessing for difficult scans
  preprocess:
    enabled: true
    enhance: true
    denoise: true
    deskew: true
    binarize: false

  # Quality analysis thresholds
  quality:
    blur_threshold: 100.0
    contrast_threshold: 25.0
    skew_threshold: 1.5
    brightness_min: 50.0
    brightness_max: 200.0
    hough_threshold: 200
  
  # Output settings
  output:
    save_intermediate: false
    artifacts_dir: "output/document_expert"
    visualize_layout: false
    generate_summary: true
  
  # Batch processing
  batch:
    parallel: false
    max_workers: 4

# Engineering-specific settings
engineering:
  extract_measurements: true
  extract_annotations: true
  measurement_patterns:
    - '\d+\.?\d*\s*(?:mm|cm|m|km|in|ft|yd)'
    - '\d+\'\d+"'
    - '\d+\.?\d*\s*x\s*\d+\.?\d*'

# Generalized extractors
extractors:
  tables:
    enabled: true
    extract_content: true
    line_scale: 40
    min_table_area_ratio: 0.01
    min_line_length_ratio: 0.4
    line_merge_tolerance: 6
    min_cell_size: 12
    cell_padding: 2
    min_words_in_table: 5
    min_filled_cells: 1
    binarize_method: "otsu"
    adaptive_block_size: 21
    adaptive_c: 5
  key_values:
    max_key_length: 48
    max_value_length: 200

# Logging Configuration
logging:
  level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: ""  # Leave empty to log to console only
